!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.autoData=t():e.autoData=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=22)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.camelize=t.includes=t.getBrowserPageview=t.toArray=t.isArray=t.areDifferent=t.isObject=t.capitalize=t.defaults=t.withTimeout=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(1),o=r(i),s=(t.withTimeout=function(e,t){var n=!1;return setTimeout(e,t||2e3),function(){n||(n=!0,e())}},t.defaults=function(e,t){var n={};return"object"!==("undefined"==typeof e?"undefined":a(e))&&(e={}),"object"!==("undefined"==typeof t?"undefined":a(t))&&(t={}),Object.keys(t).forEach(function(r){n[r]=r in e?e[r]:t[r]}),n},t.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.isObject=function(e){return"object"===("undefined"==typeof e?"undefined":a(e))&&null!==e},t.areDifferent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(!0){case!!Object.keys(e).filter(function(e){return!(e in t)}).length:case!!Object.keys(t).filter(function(t){return!(t in e)}).length:case!!Object.keys(e).filter(function(n){return e[n]!==t[n]}).length:return!0;default:return!1}},t.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)});t.toArray=function(e){return s(e)?e:[e]},t.getBrowserPageview=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=location,n=t.pathname,r=t.search,a=history.state||document,i=a.title;return{page:""+n+(e?r:""),title:i}},t.includes=function(e,t){return e.indexOf(t)!==-1},t.camelize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"!=typeof e?(o.default.error("Camelize needs a string as argument"),e):e.replace(/[-|_|.](.)/gi,function(e,t){return t.toUpperCase()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},a=function(){},i=function(e){return e.map(function(e){return"string"==typeof e?e:JSON.stringify(e)}).join(" ")},o=[{level:"debug",background:"#c0f2ef",color:"black"},{level:"info",background:"#8490f2",color:"black"},{level:"warn",background:"#ffc765",color:"white"},{level:"error",background:"#ff3f3a",color:"white"}].map(function(e){var t=e.level,n=e.background,r=e.color;return{level:t,background:n,color:r,logFn:function(){for(var e=arguments.length,a=Array(e),o=0;o<e;o++)a[o]=arguments[o];console[t]("%c "+i(a),"background: "+n+"; padding: 3px 0; color: "+r+";")}}}),s=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.forEach(function(e){var n=e.level,i=e.logFn;r[n]=t===!0?i:a})},u=t.setLevel=function(e){var t=o.findIndex(function(t){var n=t.level;return n===e});t!==-1?(s(o.slice(0,t),!1),s(o.slice(t,o.length),!0)):s(o,!1)};u("warn"),t.default=r},function(e,t,n){function r(e,t,n,r,i){var o=a.apply(this,arguments);return e.addEventListener(n,o,i),{destroy:function(){e.removeEventListener(n,o,i)}}}function a(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&r.call(e,n)}}var i=n(21);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EVENT="event",t.INITIAL_TAGS="initial-tags",t.MEDIA_QUERY="media-query",t.OUTBOUND_FORM="outbound-form",t.OUTBOUND_LINK="outbound-link",t.SOCIAL="social",t.PAGEVIEW="pageview",t.VIRTUAL_PAGEVIEW="virtualpageview"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){var t=e.tms,n={};if(!t)throw new Error(s.NO_DRIVER_PROVIDED);var r=[],a=[];switch(t.name){case"gtm":r.push(d.parser),a.push(d.sender);break;case"tealium":r.push(h.parser),a.push(h.sender)}return t.parser&&r.push(t.parser),t.sender&&a.push(t.sender),{instance:new c.default({parsers:r,enhancer:t.enhancer,senders:a}),defaultConfig:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(6),s=a(o),u=n(7),c=r(u),l=n(8),d=a(l),f=n(9),h=a(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10);Object.defineProperty(t,"eventTracker",{enumerable:!0,get:function(){return r(a).default}});var i=n(11);Object.defineProperty(t,"initialTags",{enumerable:!0,get:function(){return r(i).default}});var o=n(13);Object.defineProperty(t,"mediaQueryTracker",{enumerable:!0,get:function(){return r(o).default}});var s=n(14);Object.defineProperty(t,"outboundFormTracker",{enumerable:!0,get:function(){return r(s).default}});var u=n(15);Object.defineProperty(t,"outboundLinkTracker",{enumerable:!0,get:function(){return r(u).default}});var c=n(17);Object.defineProperty(t,"socialTracker",{enumerable:!0,get:function(){return r(c).default}});var l=n(18);Object.defineProperty(t,"urlChangeTracker",{enumerable:!0,get:function(){return r(l).default}});var d=n(16);Object.defineProperty(t,"pageviewTracker",{enumerable:!0,get:function(){return r(d).default}});var f=n(12);Object.defineProperty(t,"jwplayerTracker",{enumerable:!0,get:function(){return r(f).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NO_DRIVER_PROVIDED="No driver was provided",t.NO_DRIVER_INSTANCE="There is no driver instance",t.DRIVER_NOT_FOUND="Driver not found",t.PLUGIN_NOT_FOUND="Plugin not found",t.MISSING_PROPERTY="Missing property",t.NO_PARSER_PROVIDED="You need to provide a parser function if you do not use a default tms",t.NO_SENDER_PROVIDED="You need to provide a sender function if you do not use a default tms"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),s=n(1),u=r(s),c=function(){function e(t){var n=t.senders,r=t.parsers,i=t.enhancer;a(this,e),this.parsers=r,this.enhancer=i||function(e){return e},this.senders=n,this.data={}}return i(e,[{key:"send",value:function(e,t){try{var n=this.parsers.reduce(function(t,n){return n(e,t)},t),r=this.enhancer(n);this.senders.forEach(function(e){return e(r)}),u.default.debug(e,JSON.stringify(r,null,2))}catch(e){throw e}}},{key:"get",value:function(e){return this.data[e]}},{key:"set",value:function(e,t){var n=this;(0,o.isObject)(e)?Object.keys(e).forEach(function(t){n.set(t,e[t])}):this.data[e]=t}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.sender=t.parser=t.config=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(3),o=r(i);t.config={eventTracker:{trigger:"obj",attributes:["act","desc","val"]}},t.parser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){case o.EVENT:return a({event:"click"},t);case o.VIRTUAL_PAGEVIEW:return a({event:"virtualpageview"},t);case o.PAGEVIEW:return a({event:"pageview"},t);case o.MEDIA_QUERY:case o.OUTBOUND_FORM:case o.OUTBOUND_LINK:case o.SOCIAL:case o.INITIAL_TAGS:default:return a({event:e},t)}},t.sender=function(e){window.dataLayer||(window.dataLayer=[]),window.dataLayer.push(e)}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.sender=t.parser=t.config=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(3),o=r(i);t.config={eventTracker:{trigger:"obj",attributes:["act","desc","val"]}},t.parser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){case o.EVENT:return a({event:"click"},t);case o.VIRTUAL_PAGEVIEW:return a({event:"virtualpageview"},t);case o.PAGEVIEW:return a({event:"pageview"},t);case o.MEDIA_QUERY:case o.OUTBOUND_FORM:case o.OUTBOUND_LINK:case o.SOCIAL:case o.INITIAL_TAGS:default:return a({event:e},t)}},t.sender=function(e){var t=window,n=t.utag;if(!n)throw new Error("TEALIUM SENDER REQUIRES utag GLOBAL");switch(e.event){case"pageview":case"virtualpageview":n.view(e);break;default:n.link(e)}}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(window.addEventListener){this.opts=s(t,{attributePrefix:"data-event-",trigger:"obj",attributes:["act","desc","val"]}),this.tracker=e;var n=this.opts.attributePrefix,r="["+n+this.opts.trigger+"]";this.delegate=i(document,r,"click",this.handleEventClicks.bind(this))}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(0),s=o.defaults,u=o.camelize;a.prototype.handleEventClicks=function(e){var t=e.delegateTarget,n=this.opts,a=n.attributePrefix,i=n.trigger,o=n.attributes,s={};[].concat(r(o),[i]).forEach(function(e){var n=t.getAttribute(""+a+e);n&&(s[u(e)]=n)}),this.tracker.send("event",s)},a.prototype.remove=function(){this.delegate.destroy(),this.delegate=null,this.tracker=null,this.opts=null},t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){var n=this;this.opts=(0,c.defaults)(t,{attributePrefix:"data-",initialTagsDelay:1e3,tags:[]}),this.tracker=e,this.tagSelector="["+this.opts.attributePrefix+"initial-tags]",document.addEventListener("DOMContentLoaded",function(){setTimeout(n.parseInitialTags.bind(n),n.opts.initialTagsDelay)})}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_EVENT=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(1),u=r(s),c=n(0),l=t.DEFAULT_EVENT="click";i.prototype.send=function(e){this.tracker.send("initial-tags",o({event:l},e))},i.prototype.parseInitialTags=function(){var e=[].slice.call(document.querySelectorAll(this.tagSelector)),t=[].concat(a(this.opts.tags),a(e.reduce(function(e,t){try{return e.concat(JSON.parse(t.innerText))}catch(t){return u.default.warn("Script tag parsing failed",t),e}},[])));t.forEach(this.send.bind(this))},t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.UNSUPPORTED_EVENT=t.NO_API_PROVIDED=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=n(1),c=r(u),l=t.NO_API_PROVIDED="No JwPlayer instance was provided",d=t.UNSUPPORTED_EVENT="The event: %s is not supported",f=function(){function e(t,n){var r=this;if(a(this,e),this.opts=(0,s.defaults)(n,{jwplayer:null,events:["playlistItem","play","pause","complete","error","seek","mute","volume","fullscreen","resize","audioTrackChanged","displayClick"],autoDetect:!1}),!this.opts.jwplayer)throw new Error(l);this.tracker=t,this.instances=[];var o=this.opts.jwplayer;if((0,s.includes)(this.opts.events,"all"))throw new Error(d.replace("%s","all"));o.api.registerPlugin("autoData","6.0",function(e){return r.setInstance(e)}),this.opts.autoDetect&&(c.default.warn("jwplayer:autoDetect is experimental because it uses the jwplayer.defaults configurationand it could be overridden so be careful with its use !"),o.defaults||(o.defaults={}),o.defaults.plugins||(o.defaults.plugins={}),o.defaults.plugins=i({},o.defaults.plugins,{autoData:{}}))}return o(e,[{key:"onEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};switch(t){case"playlistItem":r={act:"load",desc:n.item.title,val:n.index};break;case"play":r={act:"play",desc:n.oldstate};break;case"pause":r={act:"pause",desc:n.oldstate};break;case"complete":var a=e.getPlaylistItem(),o=a.title,s=void 0===o?"":o;r={act:"complete",desc:s};break;case"error":r={act:"error",desc:n.message};break;case"seek":r={act:"seek",desc:n.position+"|"+n.offset};break;case"mute":r={act:"mute",desc:n.mute};break;case"volume":r={act:"volume",desc:n.volume};break;case"fullscreen":r={act:"fullscreen",desc:n.fullscreen};break;case"resize":r={act:"resize",desc:n.width+"|"+n.height};break;case"audioTrackChanged":r=i({act:"playlist"},n);break;case"displayClick":r={act:"clic"}}this.tracker.send("jwplayer",r)}},{key:"setInstance",value:function(e){var t=this;this.opts.events.forEach(function(n){e.on(n,function(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return t.onEvent.apply(t,[e,n].concat(a))})}),e.on("remove",function(){return t.unsetInstance(e)}),this.instances.push(e.uniqueId),this.tracker.send("jwplayer",{obj:"instance",val:e.uniqueId})}},{key:"unsetInstance",value:function(e){var t=this.instances.indexOf(e.uniqueId);t!==-1&&(this.instances.splice(t,1),this.tracker.send("jwplayer",{obj:"remove",val:e.uniqueId}))}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e,t){window.matchMedia&&(this.opts=o(t,{mediaQueryDefinitions:!1,mediaQueryChangeTemplate:this.changeTemplate,mediaQueryChangeTimeout:1e3}),s(this.opts.mediaQueryDefinitions)&&(this.opts.mediaQueryDefinitions=u(this.opts.mediaQueryDefinitions),this.tracker=e,this.changeListeners=[],this.processMediaQueries()))}function a(e){return l[e]?l[e]:(l[e]=window.matchMedia(e),l[e])}Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),o=n(0).defaults,s=n(0).isObject,u=n(0).toArray,c="(not set)",l={};r.prototype.processMediaQueries=function(){var e=this;this.opts.mediaQueryDefinitions.forEach(function(t){if(t.name&&t.dimensionIndex){var n=e.getMatchName(t);e.tracker.set("dimension"+t.dimensionIndex,n),e.addChangeListeners(t)}})},r.prototype.getMatchName=function(e){var t=void 0;return e.items.forEach(function(e){a(e.media).matches&&(t=e)}),t?t.name:c},r.prototype.addChangeListeners=function(e){var t=this;e.items.forEach(function(n){var r=a(n.media),o=i(function(){t.handleChanges(e)},t.opts.mediaQueryChangeTimeout);r.addListener(o),t.changeListeners.push({mql:r,fn:o})})},r.prototype.handleChanges=function(e){var t=this.getMatchName(e),n=this.tracker.get("dimension"+e.dimensionIndex);t!==n&&(this.tracker.set("dimension"+e.dimensionIndex,t),this.tracker.send("media-query",{name:e.name,value:this.opts.mediaQueryChangeTemplate(n,t)}))},r.prototype.remove=function(){for(var e,t=0;e=this.changeListeners[t];t+=1)e.mql.removeListener(e.fn);this.changeListeners=null,this.tracker=null,this.opts=null},r.prototype.changeTemplate=function(e,t){return e+" => "+t},t.default=r},function(e,t,n){"use strict";function r(e,t){window.addEventListener&&(this.opts=a(t,{shouldTrackOutboundForm:this.shouldTrackOutboundForm}),this.tracker=e,this.delegate=i(document,"form","submit",this.handleFormSubmits.bind(this)))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0).defaults,i=n(2),o=n(0);r.prototype.handleFormSubmits=function(e){var t=e.delegateTarget,n=t.getAttribute("action"),r={transport:"beacon"};this.opts.shouldTrackOutboundForm(t)&&(navigator.sendBeacon||(e.preventDefault(),r.hitCallback=o.withTimeout(function(){t.submit()})),this.tracker.send("outbound-form",{action:n,fieldsObj:r}))},r.prototype.shouldTrackOutboundForm=function(e){var t=e.getAttribute("action");return t&&0===t.indexOf("http")&&t.indexOf(location.hostname)<0},r.prototype.remove=function(){this.delegate.destroy(),this.delegate=null,this.tracker=null,this.opts=null},t.default=r},function(e,t,n){"use strict";function r(e,t){window.addEventListener&&(this.opts=a(t,{shouldTrackOutboundLink:this.shouldTrackOutboundLink}),this.tracker=e,this.delegate=i(document,"a","click",this.handleLinkClicks.bind(this)))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0).defaults,i=n(2);r.prototype.handleLinkClicks=function(e){var t=e.delegateTarget;this.opts.shouldTrackOutboundLink(t)&&(navigator.sendBeacon||(t.target="_blank"),this.tracker.send("outbound-link",{href:t.href,transport:"beacon"}))},r.prototype.shouldTrackOutboundLink=function(e){return e.hostname!==location.hostname&&0===e.protocol.indexOf("http")},r.prototype.remove=function(){this.delegate.destroy(),this.delegate=null,this.tracker=null,this.opts=null},t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=n(1),c=r(u),l=function(){function e(t,n){var r=this;i(this,e),this.opts=(0,s.defaults)(n,{attributePrefix:"data-pageview-",trigger:"page",attributes:["title"],withQueryString:!0,hotReload:!1}),this.tracker=t,this.currentData={},this.opts.hotReload&&(c.default.warn("hotReload feature is not really well tested, be careful with its usage"),this.startHotReload()),document.addEventListener("DOMContentLoaded",function(){r.send()})}return o(e,[{key:"startHotReload",value:function(){var e=this,t=history,n=t.pushState,r=t.replaceState,a=function(){return setTimeout(e.send.bind(e),100)};history.pushState=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1];(0,s.isObject)(i)&&o&&(i.title=o),n.apply(history,t),a()},history.replaceState=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],o=t[1];(0,s.isObject)(i)&&o&&(i.title=o),r.apply(history,t),a()},window.addEventListener("popstate",a)}},{key:"send",value:function(){var e=this.getPageView();(0,s.areDifferent)(e,this.currentData)&&(this.currentData=e,this.tracker.send("pageview",e))}},{key:"getPageView",value:function(){var e=this.opts,t=e.attributePrefix,n=e.trigger,r=e.attributes,i=e.withQueryString,o=document.querySelector("["+t+n+"]"),u=(0,s.getBrowserPageview)(i);return o&&[].concat(a(r),[n]).filter(function(e){return o.hasAttribute(""+t+e)}).forEach(function(e){u[(0,s.camelize)(e)]=o.getAttribute(""+t+e)}),u}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(window.addEventListener){this.opts=a(t,{attributePrefix:"data-"}),this.tracker=e;var n=this.opts.attributePrefix,r="["+n+"social-network]"+("["+n+"social-action]")+("["+n+"social-target]");this.handleSocialClicks=this.handleSocialClicks.bind(this),this.addWidgetListeners=this.addWidgetListeners.bind(this),this.addTwitterEventHandlers=this.addTwitterEventHandlers.bind(this),this.handleTweetEvents=this.handleTweetEvents.bind(this),this.handleFollowEvents=this.handleFollowEvents.bind(this),this.handleLikeEvents=this.handleLikeEvents.bind(this),this.handleUnlikeEvents=this.handleUnlikeEvents.bind(this),this.delegate=i(document,r,"click",this.handleSocialClicks),"complete"!==document.readyState?window.addEventListener("load",this.addWidgetListeners):this.addWidgetListeners()}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0).defaults,i=n(2);r.prototype.addWidgetListeners=function(){window.FB&&this.addFacebookEventHandlers(),window.twttr&&this.addTwitterEventHandlers()},r.prototype.handleSocialClicks=function(e){var t=e.delegateTarget,n=this.opts.attributePrefix;this.tracker.send("social",{socialNetwork:t.getAttribute(n+"social-network"),socialAction:t.getAttribute(n+"social-action"),socialTarget:t.getAttribute(n+"social-target")})},r.prototype.addTwitterEventHandlers=function(){var e=this;try{twttr.ready(function(){twttr.events.bind("tweet",e.handleTweetEvents),twttr.events.bind("follow",e.handleFollowEvents)})}catch(e){}},r.prototype.removeTwitterEventHandlers=function(){var e=this;try{twttr.ready(function(){twttr.events.unbind("tweet",e.handleTweetEvents),twttr.events.unbind("follow",e.handleFollowEvents)})}catch(e){}},r.prototype.addFacebookEventHandlers=function(){try{FB.Event.subscribe("edge.create",this.handleLikeEvents),FB.Event.subscribe("edge.remove",this.handleUnlikeEvents)}catch(e){}},r.prototype.removeFacebookEventHandlers=function(){try{FB.Event.unsubscribe("edge.create",this.handleLikeEvents),FB.Event.unsubscribe("edge.remove",this.handleUnlikeEvents)}catch(e){}},r.prototype.handleTweetEvents=function(e){if("tweet"===e.region){var t=e.data.url||e.target.getAttribute("data-url")||location.href;this.tracker.send("social",{name:"Twitter",action:"tweet",url:t})}},r.prototype.handleFollowEvents=function(e){if("follow"===e.region){var t=e.data.screen_name||e.target.getAttribute("data-screen-name");this.tracker.send("social",{name:"Twitter",action:"follow",screenName:t})}},r.prototype.handleLikeEvents=function(e){this.tracker.send("social",{name:"Facebook",action:"like",url:e})},r.prototype.handleUnlikeEvents=function(e){this.tracker.send("social",{name:"Facebook",action:"unlike",url:e})},r.prototype.remove=function(){window.removeEventListener("load",this.addWidgetListeners),this.removeFacebookEventHandlers(),this.removeTwitterEventHandlers(),this.delegate.destroy(),this.delegate=null,this.tracker=null,this.opts=null,this.handleSocialClicks=null,this.addWidgetListeners=null,this.addTwitterEventHandlers=null,this.handleTweetEvents=null,this.handleFollowEvents=null,this.handleLikeEvents=null,this.handleUnlikeEvents=null},t.default=r},function(e,t,n){"use strict";function r(e,t){history.pushState&&window.addEventListener&&(this.opts=i(t,{shouldTrackUrlChange:this.shouldTrackUrlChange}),this.tracker=e,this.path=a(),this.updateTrackerData=this.updateTrackerData.bind(this),this.originalPushState=history.pushState,history.pushState=function(e,t){var n;o(e)&&t&&(e.title=t);for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];(n=this.originalPushState).call.apply(n,[history,e,t].concat(a)),this.updateTrackerData()}.bind(this),this.originalReplaceState=history.replaceState,history.replaceState=function(e,t){var n;o(e)&&t&&(e.title=t);for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];(n=this.originalReplaceState).call.apply(n,[history,e,t].concat(a)),this.updateTrackerData(!1)}.bind(this),window.addEventListener("popstate",this.updateTrackerData))}function a(){return location.pathname+location.search}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).defaults,o=n(0).isObject;r.prototype.updateTrackerData=function(e){var t=this;e=e!==!1,setTimeout(function(){var n=t.path,r=a();if(n!==r&&t.opts.shouldTrackUrlChange.call(t,r,n)){var i=r,s=o(history.state)?history.state.title:document.title;t.path=r,t.tracker.set({page:i,title:s}),e&&t.tracker.send("pageview",{page:i,title:s})}},0)},r.prototype.shouldTrackUrlChange=function(e,t){return e&&t},r.prototype.remove=function(){window.removeEventListener("popstate",this.updateTrackerData),history.replaceState=this.originalReplaceState,history.pushState=this.originalPushState,this.tracker=null,this.opts=null,this.path=null,this.updateTrackerData=null,this.originalReplaceState=null,this.originalPushState=null},t.default=r},function(e,t){function n(){return(new Date).getTime()}e.exports=Date.now||n},function(e,t,n){var r=n(19);e.exports=function(e,t,n){function a(){var l=r()-u;l<t&&l>0?i=setTimeout(a,t-l):(i=null,n||(c=e.apply(s,o),i||(s=o=null)))}var i,o,s,u,c;return null==t&&(t=100),function(){s=this,o=arguments,u=r();var l=n&&!i;return i||(i=setTimeout(a,t)),l&&(c=e.apply(s,o),s=o=null),c}}},function(e,t){function n(e,t){for(;e&&e.nodeType!==r;){if(e.matches(t))return e;e=e.parentNode}}var r=9;if(Element&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(5),s=a(o),u=n(3),c=a(u),l=n(4),d=r(l),f=n(0),h=n(1),p=r(h),v=void 0,g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v||(v=(0,d.default)(e)),(0,h.setLevel)(e.debug||"none"),e.plugins?Object.keys(e.plugins).filter(function(e){return s[e]}).forEach(function(t){var n=i({},v.defaultConfig[t]||{},e.plugins[t]||{});p.default.debug("Config for plugin : "+t),p.default.debug(n),new s[t](v.instance,n)}):p.default.warn("No plugins provided")},y=function(e){v.instance.send(c.VIRTUAL_PAGEVIEW,i({},(0,f.getBrowserPageview)(),e))},b=function(e){v.instance.send(c.PAGEVIEW,i({},(0,f.getBrowserPageview)(),e))},m=function(e){v.instance.send(c.EVENT,e)},w={init:g,sendVirtualPageView:y,sendPageView:b,sendEvent:m,tagTypes:c};e.exports=w}])});